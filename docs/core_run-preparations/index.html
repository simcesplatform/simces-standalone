<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://simcesplatform.github.io/core_run-preparations/">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Simulation run preparations - SimCES</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
        <link href="../css/extra.css" rel="stylesheet">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">SimCES</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Use <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href=".." class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../core_features/" class="dropdown-item">Features</a>
</li>
                                    
<li>
    <a href="../core_install/" class="dropdown-item">Installation</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Run simulation</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../core_run/" class="dropdown-item">Overview</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Test platform</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../core_run-first/" class="dropdown-item">Run first test simulation</a>
</li>
            
<li>
    <a href="../energy_run-ec-demo/" class="dropdown-item">Run Energy Community demo</a>
</li>
            
<li>
    <a href="../energy_run-ev-charging-demo/" class="dropdown-item">Run EV Charging demo</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../core_platform-settings/" class="dropdown-item">Configuring settings</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Start simulation</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="./" class="dropdown-item active">Simulation run preparations</a>
</li>
            
<li>
    <a href="../core_start-simulation/" class="dropdown-item">Starting a simulation</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../core_follow-run/" class="dropdown-item">Follow running simulation</a>
</li>
            
<li>
    <a href="../core_stop-simulation/" class="dropdown-item">Stop simulation</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../core_log-api/" class="dropdown-item">Log API</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Develop <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../core_develop-overview/" class="dropdown-item">Overview</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Basic concepts</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../core_time/" class="dropdown-item">Time and synchronization with epochs</a>
</li>
            
<li>
    <a href="../core_cmp-mgmt/" class="dropdown-item">Platform managed and externally managed components</a>
</li>
            
<li>
    <a href="../core_soa/" class="dropdown-item">Service-oriented architecture</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">How to develop</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Creating new component</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../core_create-cmp/" class="dropdown-item">Overview</a>
</li>
            
<li>
    <a href="../core_docker-image/" class="dropdown-item">Building Docker image for a component</a>
</li>
            
<li>
    <a href="../core_component-manifest/" class="dropdown-item">Creating a component manifest file</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../core_conv-msg/" class="dropdown-item">Conventions of messaging</a>
</li>
            
<li>
    <a href="../core_conv-name/" class="dropdown-item">Conventions of naming</a>
</li>
            
<li>
    <a href="../core_pseudocode/" class="dropdown-item">Pseudocode reference</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Simulation Tools package</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../core_sim-tools/" class="dropdown-item">Simulation Tools package</a>
</li>
            
<li>
    <a href="../core_abstractsimulationcomponent/" class="dropdown-item">AbstractSimulationComponent</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../core_workflow-sim/" class="dropdown-item">Workflow of component in simulation</a>
</li>
            
<li>
    <a href="../core_workflow-start-end/" class="dropdown-item">Workflow of start and end</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Communication</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../core_topics-queues-exchanges/" class="dropdown-item">Topics, queues and exchanges</a>
</li>
            
<li>
    <a href="../core_exchange-mgmt/" class="dropdown-item">Exchange, management</a>
</li>
            
<li>
    <a href="../core_exchange-sim/" class="dropdown-item">Exchange, simulation-specific</a>
</li>
            
<li>
    <a href="../core_topics/" class="dropdown-item">Topics (core)</a>
</li>
            
<li>
    <a href="../core_rabbitmq-reliability/" class="dropdown-item">Reliable messaging in RabbitMQ</a>
</li>
            
<li>
    <a href="../core_amqp-footprint/" class="dropdown-item">Footprint of AMQP items</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Message structures (core)</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../core_msg/" class="dropdown-item">Message structures (core)</a>
</li>
            
<li>
    <a href="../core_msgtype/" class="dropdown-item">Message type names (core)</a>
</li>
            
<li>
    <a href="../core_ucum/" class="dropdown-item">Units of measure (UCUM)</a>
</li>
            
<li>
    <a href="../core_msg-abstractmessage/" class="dropdown-item">Message - AbstractMessage</a>
</li>
            
<li>
    <a href="../core_msg-abstractresult/" class="dropdown-item">Message - AbstractResult</a>
</li>
            
<li>
    <a href="../core_msg-epoch/" class="dropdown-item">Message - Epoch</a>
</li>
            
<li>
    <a href="../core_msg-simstate/" class="dropdown-item">Message - SimState</a>
</li>
            
<li>
    <a href="../core_msg-start/" class="dropdown-item">Message - Start</a>
</li>
            
<li>
    <a href="../core_msg-status/" class="dropdown-item">Message - Status</a>
</li>
            
<li>
    <a href="../core_block-quantity/" class="dropdown-item">Block - Quantity</a>
</li>
            
<li>
    <a href="../core_block-quantity-array/" class="dropdown-item">Block - Quantity array</a>
</li>
            
<li>
    <a href="../core_block-time-series/" class="dropdown-item">Block - Time series</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Platforms internals</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../core_logging-system/" class="dropdown-item">Logging system</a>
</li>
            
<li>
    <a href="../core_logwriter/" class="dropdown-item">LogWriter</a>
</li>
            
<li>
    <a href="../core_platformmanager/" class="dropdown-item">Platform Manager</a>
</li>
            
<li>
    <a href="../core_lifecycle/" class="dropdown-item">Simulation lifecycle</a>
</li>
            
<li>
    <a href="../core_simulationmanager/" class="dropdown-item">Simulation Manager</a>
</li>
            
<li>
    <a href="../core_dummycomponent/" class="dropdown-item">Dummy Component</a>
</li>
            
<li>
    <a href="../core_amqpmathtool/" class="dropdown-item">AmqpMathToolIntegration</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Energy domain <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../energy_overview/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../energy_conventions/" class="dropdown-item">Energy-domain-specific conventions</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Components (energy)</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../energy_controller/" class="dropdown-item">Controller</a>
</li>
            
<li>
    <a href="../energy_distribution-management-system-dms/" class="dropdown-item">Distribution management system (DMS)</a>
</li>
            
<li>
    <a href="../energy_grid-dss/" class="dropdown-item">Grid (DSS)</a>
</li>
            
<li>
    <a href="../energy_economicdispatch/" class="dropdown-item">Economic Dispatch</a>
</li>
            
<li>
    <a href="../energy_priceforecaster/" class="dropdown-item">Price Forecaster</a>
</li>
            
<li>
    <a href="../energy_procem-lfm/" class="dropdown-item">Procem-LFM</a>
</li>
            
<li>
    <a href="../energy_resourceforecaster/" class="dropdown-item">Resource Forecaster</a>
</li>
            
<li>
    <a href="../energy_static-time-series-resource/" class="dropdown-item">Static time series resource</a>
</li>
            
<li>
    <a href="../energy_storage/" class="dropdown-item">Storage</a>
</li>
            
<li>
    <a href="../energy_user-component/" class="dropdown-item">User</a>
</li>
            
<li>
    <a href="../energy_station-component/" class="dropdown-item">Station</a>
</li>
            
<li>
    <a href="../energy_ic-component/" class="dropdown-item">Intelligent Controller</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Message structures (energy)</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../energy_msg-controlstate-powersetpoint/" class="dropdown-item">ControlState.PowerSetpoint</a>
</li>
            
<li>
    <a href="../energy_msg-dmsnetworkstatus-current/" class="dropdown-item">DMSNetworkStatus.Current</a>
</li>
            
<li>
    <a href="../energy_msg-dmsnetworkstatus-voltage/" class="dropdown-item">DMSNetworkStatus.Voltage</a>
</li>
            
<li>
    <a href="../energy_msg-flexibilityneed/" class="dropdown-item">FlexibilityNeed</a>
</li>
            
<li>
    <a href="../energy_msg-init-cis-customerinfo/" class="dropdown-item">Init.CIS.CustomerInfo</a>
</li>
            
<li>
    <a href="../energy_msg-init-nis-networkbusinfo/" class="dropdown-item">Init.NIS.NetworkBusInfo</a>
</li>
            
<li>
    <a href="../energy_msg-init-nis-networkcomponentinfo/" class="dropdown-item">Init.NIS.NetworkComponentInfo</a>
</li>
            
<li>
    <a href="../energy_msg-lfmmarketresult/" class="dropdown-item">LFMMarketResult</a>
</li>
            
<li>
    <a href="../energy_msg-lfmoffering/" class="dropdown-item">LFMOffering</a>
</li>
            
<li>
    <a href="../energy_msg-networkforecaststate-current/" class="dropdown-item">NetworkForecastState.Current</a>
</li>
            
<li>
    <a href="../energy_msg-networkforecaststate-voltage/" class="dropdown-item">NetworkForecastState.Voltage</a>
</li>
            
<li>
    <a href="../energy_msg-networkstate-current/" class="dropdown-item">NetworkState.Current</a>
</li>
            
<li>
    <a href="../energy_msg-networkstate-loss/" class="dropdown-item">NetworkState.Loss</a>
</li>
            
<li>
    <a href="../energy_msg-networkstate-voltage/" class="dropdown-item">NetworkState.Voltage</a>
</li>
            
<li>
    <a href="../energy_msg-offer/" class="dropdown-item">Offer</a>
</li>
            
<li>
    <a href="../energy_msg-priceforecaststate/" class="dropdown-item">PriceForecastState</a>
</li>
            
<li>
    <a href="../energy_msg-request/" class="dropdown-item">Request</a>
</li>
            
<li>
    <a href="../energy_msg-resourceforecaststate-dispatch/" class="dropdown-item">ResourceForecastState.Dispatch</a>
</li>
            
<li>
    <a href="../energy_msg-resourceforecaststate-power/" class="dropdown-item">ResourceForecastState.Power</a>
</li>
            
<li>
    <a href="../energy_msg-resourcestate/" class="dropdown-item">ResourceState</a>
</li>
            
<li>
    <a href="../energy_msg-selectedoffer/" class="dropdown-item">SelectedOffer</a>
</li>
            
<li>
    <a href="../energy_msg-startmessageblocks/" class="dropdown-item">Start message blocks</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../energy_msgtype/" class="dropdown-item">Message type names (energy)</a>
</li>
                                    
<li>
    <a href="../energy_software-pkg/" class="dropdown-item">Software packages</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Topics (energy)</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../energy_topics/" class="dropdown-item">Topics (energy)</a>
</li>
            
<li>
    <a href="../energy_topic-priceforecaststate/" class="dropdown-item">PriceForecastState.(MarketId).(ResourceId)</a>
</li>
            
<li>
    <a href="../energy_topic-resourceforecaststate/" class="dropdown-item">ResourceForecastState.(ResourceCategory).(ResourceId)</a>
</li>
            
<li>
    <a href="../energy_topic-resourcestate/" class="dropdown-item">ResourceState.(ResourceCategory).(ResourceId)</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Scenarios</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../energy_scenario-ec-demo/" class="dropdown-item">Energy community demo</a>
</li>
            
<li>
    <a href="../energy_scenario-ev-charging-demo/" class="dropdown-item">Electric vehicle charging demo</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">About... <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../about/" class="dropdown-item">About...</a>
</li>
                                    
<li>
    <a href="../license/" class="dropdown-item">License</a>
</li>
                                    
<li>
    <a href="../maintenance-plan/" class="dropdown-item">Maintenance plan</a>
</li>
                                    
<li>
    <a href="../publications/" class="dropdown-item">Publications</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../core_platform-settings/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../core_start-simulation/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#preparations-for-a-simulation" class="nav-link">Preparations for a simulation</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#installing-a-new-component" class="nav-link">Installing a new component</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#registering-component-type-to-the-platform" class="nav-link">Registering component type to the platform</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#making-input-files-available-for-the-platform" class="nav-link">Making input files available for the platform</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#finalize-component-installation" class="nav-link">Finalize component installation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="preparations-for-a-simulation">Preparations for a simulation</h1>
<p>All file and folder names are given as relative to the platform installation folder, i.e. the folder where the file <code>fetch_platform_files.sh</code> is located at.</p>
<p>There are a couple steps before a simulation run using user developed components can be be started using the platform:</p>
<ul>
<li>All the components have to be installed. (<a href="./#installing-a-new-component">Installing a new component</a>)<ul>
<li>With externally managed components this involves installing and starting the components manually.</li>
<li>With platform managed components, this involves fetching the Docker image for the component.</li>
</ul>
</li>
<li>All the components have to be registered to the platform. (<a href="./#registering-component-type-to-the-platform">Registering new component type to the platform</a>) by providing a component manifest file for the component.</li>
<li>For platform managed components any input files (for example, CSV files) have to be made available to the platform. (<a href="./#making-input-files-available-for-the-platform">Making input files available for the platform</a>)</li>
</ul>
<p>After the component installation and registration has been done, a new simulation configuration file can be created and then used to start a new simulation run. See page <a href="../core_start-simulation/">Starting a general simulation</a> for instructions regarding starting a simulation.</p>
<h2 id="installing-a-new-component">Installing a new component</h2>
<h3 id="externally-managed-components">Externally managed components</h3>
<p>Any externally managed component should contain its own installation instructions on the documentation page of the component.</p>
<h3 id="platform-managed-components">Platform managed components</h3>
<p>A component managed by the platform should have an available Docker image that can be used to include the component in simulation runs. This Docker image must be available to the platform when a new simulation run that includes this component is started.</p>
<p>To fetch the Docker image for the component follow the procedure:</p>
<ol>
<li>
<p>Modify the file <code>docker_images_domain.txt</code> so that it contains the Docker image name for the component in question.</p>
<ul>
<li>Note, that the file must be saved using Unix line endings (LF)<ul>
<li>To change the file from Windows line endings (CR LF) to Unix line endings with Notepad++: <code>Edit -&gt; EOL Conversion -&gt; Unix (LF)</code></li>
<li>Or using Bash compatible terminal: <code>dos2unix docker_images_domain.txt</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Once the component registration and the input files have also been setup, follow the instructions at (<a href="./#finalize-component-installation">Finalize component installation</a>) to finalize the component installation.</p>
</li>
</ol>
<h3 id="downloading-component-source-code">Downloading component source code</h3>
<p>The full source should not be needed when installing components, at least not with the platform managed components, but the following is included here if it is required.</p>
<p>The general form of the command to fetch the source code using Git is:</p>
<pre><code class="language-bash">git clone --recursive https://github.com/simcesplatform/&lt;component_name&gt;.git
</code></pre>
<p>or if the code is in a private GitLab repository (with an insecure SSL certificate at the host):</p>
<pre><code class="language-bash">git -c http.sslVerify=false clone --recursive &lt;full_address_to_the_repository&gt;.git
</code></pre>
<h2 id="registering-component-type-to-the-platform">Registering component type to the platform</h2>
<p>Before platform can be used to start a new simulation that includes a new domain component, the new component type has to be registered to the platform. The registering is done to allow the platform to know whether the new component is an externally managed or platform managed component and in the latter case to also know which Docker image to use when deploying the platform managed component. The registration process also allows the user to mark some input parameters as required so that the platform does not start a new simulation run in vain if essential information is missing from the simulation configuration.</p>
<p>The components are registered for the platform by providing it with component manifest files for all the required component types.</p>
<p>Each component should provide a component manifest file with the component source code.</p>
<p>To register all the required component types to the platform follow the procedure:</p>
<ol>
<li>Modify the Git server file so that it contains the code repository name for the component in question in the Repositories listing. See the section <a href="#git-server-file-format">Git server file format</a> about the details of the used attributes and the syntax for the file.<ul>
<li>Use the file <code>components/github_server_domain.yml</code> if the repositories are available at GitHub</li>
<li>Use the file <code>components/gitlab_server_domain.yml</code> if the repositories are in the GitLab server used in the development of the platform.<ul>
<li>Note, when using private repositories which require access tokens, remember to add the required tokens to file <code>access_tokens.env</code>.</li>
</ul>
</li>
<li>It is also possible to create completely new Git server file under the folder <code>components</code>. All files under the folder are gone through when fetching the manifest files.</li>
<li>Alternatively, it is also possible to manually copy the component manifest file to the folder <code>manifests</code>. All YAML files under that folder are taken to account when the platform is started.</li>
<li>There also exists a script that can be used to copy locally existing manifest files to the manifests folder. To use it, first edit the file <code>local_manifest_files.txt</code> to include the paths to the local manifest files and then run: <code>source fetch_local_manifests.sh local_manifest_files.txt</code></li>
</ul>
</li>
<li>Once the component installation as well as the input files have been setup, follow the instructions at (<a href="./#finalize-component-installation">Finalize component installation</a>) to finalize the component installation.</li>
</ol>
<h3 id="git-server-file-format">Git server file format</h3>
<p>The server file is in YAML format and supports the following attributes:</p>
<ul>
<li><code>Type</code> (required)<ul>
<li>can be either "<code>GitLab</code>" or "<code>GitHub</code>" depending on the remote Git server type</li>
</ul>
</li>
<li><code>Repositories</code> (required)<ul>
<li>a list of repository names from which a component manifest should be fetched</li>
<li>each repository can contain the following attributes:<ul>
<li><code>File</code> (optional)<ul>
<li>the filename for the component manifest file, must have an extension of "<code>.yml</code>" or "<code>.yaml</code>"</li>
<li>the default filename is "<code>component_manifest.yml</code>"</li>
</ul>
</li>
<li><code>Branch</code> (optional)<ul>
<li>the branch or tag of the repository that should be used when fetching the manifest file</li>
<li>the default branch is "<code>master</code>"</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><code>Host</code> (optional)<ul>
<li>the host server address</li>
<li>only taken account for GitLab servers, for GitHub server, "<code>https://github.com</code>", is used</li>
<li>the default value for GitLab server is "<code>https://gitlab.com</code>"</li>
</ul>
</li>
<li><code>Certificate</code> (optional)<ul>
<li>whether the host server has a proper SSL certificate</li>
<li>can be either <code>true</code> or <code>false</code>, the default value is <code>true</code></li>
</ul>
</li>
<li><code>AccessToken</code> (optional)<ul>
<li>An access token to be used when fetching files from a private repository</li>
<li>If given in the form "<code>${ENV_VARIABLE}</code>" the value of the environmental variable <code>ENV_VARIABLE</code> is used as the access token. The platform loads the environment variables from file <code>access_tokens.env</code> when fetching the manifest files.</li>
<li>The given access token must provide at least read access to the given repositories</li>
<li>If no access token is given, all repositories are assumed to be public</li>
</ul>
</li>
</ul>
<h3 id="example-git-server-file">Example Git server file</h3>
<p>The following server file would be used to fetch manifest files from 4 GitLab repositories hosted at <code>https://gitlab.address.com</code>. Using the default branch, file "<code>component_manifest.yml</code>" from "<code>procemplus/my_component1</code>" and "<code>procemplus/my_component2</code>" and file "<code>my_manifest.yml</code>" from "<code>procemplus/my_component3</code>". Using the branch "<code>my_branch</code>", file "<code>my_folder/my_manifest.yml</code>" from "<code>username/my_component4</code>". The access to the repositories is provided by environment variable <code>GITLAB_ACCESS_TOKEN</code> which is read from file <code>access_tokens.env</code>.</p>
<pre><code class="language-yaml">Repositories:
    - procemplus/my_component1
    - procemplus/my_component2
    - procemplus/my_component3:
        File: my_manifest.yml
    - username/my_component4:
        File: my_folder/my_manifest.yml
        Branch: my_branch
Type: GitLab
Host: https://gitlab.address.com
Certificate: false
AccessToken: ${GITLAB_ACCESS_TOKEN}
</code></pre>
<h2 id="making-input-files-available-for-the-platform">Making input files available for the platform</h2>
<p>Any input file that is used by a platform managed component during a simulation run, needs to be made available for the platform. Example for an input file is the CSV file that is used as input for the <a href="../energy_static-time-series-resource/">Static Time Series Resource</a> components in the <a href="../energy_run-ec-demo/">Energy Community demo simulation</a>.</p>
<p>Any input files that are used by externally managed components are not required to be accessible by the platform.</p>
<p>To make a input file available for the platform:</p>
<ol>
<li>
<p>Copy the input file to the <code>resources</code> folder. The files can be either directly at the resources folder (like the input files for EC demo scenario) or inside a subfolder.</p>
</li>
<li>
<p>Once the component installation and registration have also been setup, follow the instructions at (<a href="./#finalize-component-installation">Finalize component installation</a>) to finalize the component installation.</p>
</li>
</ol>
<p>Note, that due to the limitation of the current platform implementation, all the files included in the <code>resources</code> folder will be made available for all the platform managed components. Also, to avoid errors, any file that is currently being used in a running simulation should not be modified while the simulation is still running.</p>
<h2 id="finalize-component-installation">Finalize component installation</h2>
<p>The component can be installed and registered to the platform by running the following installation script. This script will also make any prepared input files available to the platform.</p>
<pre><code class="language-bash">source platform_domain_setup.sh
</code></pre>
<p>A successful run of the script should show no error messages in the output. See the <a href="#example-output">Example output</a> section for possible script output when no errors are present.</p>
<p>Note, that for externally managed components, the script above can only register the component manifests to the platform. The manual installation and starting procedure for the components is still required in addition to running the script.</p>
<h3 id="example-output">Example output</h3>
<pre><code class="language-text">Fetching the domain Docker images from Docker registry
Reading 'docker_images_domain.txt' for Docker image names
Pulling Docker image: ghcr.io/simcesplatform/static-time-series-resource:latest
latest: Pulling from simcesplatform/static-time-series-resource
Digest: sha256:844b269933eb9272bed896d83e9ace4d0b4ad9311507a3027c12a874f3c7087c
Status: Image is up to date for ghcr.io/simcesplatform/static-time-series-resource:latest
ghcr.io/simcesplatform/static-time-series-resource:latest

Fetching the component manifests.
Creating simces_manifest_fetcher ... done
Attaching to simces_manifest_fetcher
simces_manifest_fetcher | 2021-10-14T08:04:48.932 ---     INFO --- Fetching file 'component_manifest.yml' from GitHub repository simcesplatform/static-time-series-resource
simces_manifest_fetcher | 2021-10-14T08:04:49.217 ---     INFO --- Fetching file 'component_manifest_manager.yml' from GitHub repository simcesplatform/simulation-manager
simces_manifest_fetcher | 2021-10-14T08:04:49.417 ---     INFO --- Fetching file 'component_manifest_dummy.yml' from GitHub repository simcesplatform/simulation-manager
simces_manifest_fetcher | 2021-10-14T08:04:49.629 ---     INFO --- Fetching file 'component_manifest.yml' from GitHub repository simcesplatform/logwriter
simces_manifest_fetcher | 2021-10-14T08:04:49.820 ---     INFO --- Fetching file 'component_manifest_manager.yml' from GitHub repository simcesplatform/simulation-manager
simces_manifest_fetcher | 2021-10-14T08:04:49.847 ---     INFO --- Fetching file 'component_manifest_dummy.yml' from GitHub repository simcesplatform/simulation-manager
simces_manifest_fetcher | 2021-10-14T08:04:49.865 ---     INFO --- Fetching file 'component_manifest.yml' from GitHub repository simcesplatform/logwriter
simces_manifest_fetcher exited with code 0
Going to remove simces_manifest_fetcher
Removing simces_manifest_fetcher ... done

Copying the contents of 'resources' to Docker volume 'simces_simulation_resources' to folder '/resources'
Copying file resources/Load2.csv
Copying file resources/Load1.csv
Copying file resources/Load4.csv
Copying file resources/PV_large.csv
Copying file resources/Load3.csv
Copying file resources/PV_small.csv
Copying file resources/EV.csv
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>SimCES | Simulation Environment of Complex Energy System</p>
                <p>Copyright &copy; 2021-2023 Tampere University and VTT Technical Research Centre of Finland</p>
            <p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a> [<a href="https://datatracker.ietf.org/doc/html/rfc2119">RFC2119</a>] [<a href="https://datatracker.ietf.org/doc/html/rfc8174">RFC8174</a>] when, and only when, they appear in all capitals, as shown here.</p>
            <p>Get source code from GitHub: <a href="https://github.com/simcesplatform">https://github.com/simcesplatform</a> (MIT license; see the source code or <a href="../license">license</a>)</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
